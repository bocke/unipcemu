Port Timidity (is in the ..\rest\info\timidity directory) to the emulator?

Make the <imagename>.DAT dynamic files fully dynamic, by initialising with the following header:

typedef struct
{
byte header[7]; //DYNIMG\0, if not: not a dynamic image or corrupt!
uint_32 filesize; //The full size of the image, in sectors.
uint_32 sectorsize; //The full size of a sector. Atm only 512 is used.
uint_64 checksum; //A checksum of the file, including this header. For validating the file at second level!
} DYNAMICIMAGE_HEADER;

When the <imgname.dat> is changed (sector/file size only at creation!), update checksum, by substracting old values and adding new values.
When a dynamic image is read, validate checksum to find errors! If checksum fails, renew image!

Header initialisation:
.header = 'DYNIMG\0'; //Header!
.sectorsize = 512; //Size of a sector in bytes.
.filesize = numsectors*.sectorsize; //File size!
.checksum = (int)'D'+(int)'Y'+(int)'N'+(int)'I'+(int)'M'+(int)'G'+.filesize+.sectorsize; //Generate the initial checksum!

Item update:
.checksum -= oldsectorheader+oldsectorpos; //Regenerate cleared!
.checksum += newsectorheader+newsectorpos; //Generate set!